[2025-12-16 19:33:19] [INFO] [COPWATCHDOG] [run_copwatchdog.sh] Release the hounds!
[2025-12-16 19:33:19] [INFO] [COPWATCHDOG] [run_copwatchdog.sh] Found .env file in HERMES root directory
[2025-12-16 19:33:19] [INFO] [COPWATCHDOG] [run_copwatchdog.sh] Starting copwatchdog scraper...
[2025-12-16 19:38:39] [INFO] [COPWATCHDOG] [run_copwatchdog.sh] THOTH completed successfully
[2025-12-16 19:38:39] [INFO] [HERMES] [run_copwatchdog.sh] Waiting for THOTH data collection and enrichment to complete...
[2025-12-16 19:38:39] [INFO] [HERMES] [run_copwatchdog.sh] THOTH data collection and enrichment completed successfully
[2025-12-16 19:38:39] [INFO] [HERMES] [run_copwatchdog.sh] Setting up database connection...
[2025-12-16 19:39:09] [WARNING] [COPWATCHDOG] [run_copwatchdog.sh] Direct database connection failed, trying SSH tunnel...
[2025-12-16 19:39:09] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Starting DB tunnel setup script
[2025-12-16 19:39:09] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] No dependency installation script found, skipping
[2025-12-16 19:39:09] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Environment variables loaded successfully
[2025-12-16 19:39:10] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] SSH tunnel is already running and healthy
[2025-12-16 19:39:13] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Testing database connection (this may take a moment)...
[2025-12-16 19:39:13] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Attempting to connect to database through tunnel...
[2025-12-16 19:39:13] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Attempt 1/3: Testing database connection with default settings
[2025-12-16 19:39:13] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Connection successful with default settings
[2025-12-16 19:39:13] [INFO] [DB_TUNNEL] [setup_db_tunnel.sh] Database connection successful through SSH tunnel
[2025-12-16 19:39:13] [INFO] [THOTH] [run_copwatchdog.sh] SSH tunnel established successfully
[2025-12-16 19:39:13] [INFO] [THOTH] [run_copwatchdog.sh] Starting database import process...
[2025-12-16 19:39:13] [INFO] [THOTH_IMPORT] [import_to_db.sh] Starting THOTH import script
[2025-12-16 19:39:13] [INFO] [THOTH_IMPORT] [import_to_db.sh] Starting database import process
[2025-12-16 19:39:13] [INFO] [COPWATCHDOG] [import_to_db.sh] Loaded environment from /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/HERMES/.env
[2025-12-16 19:39:13] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using SSH tunnel for database connection
[2025-12-16 19:39:14] [INFO] [THOTH_IMPORT] [import_to_db.sh] Proceeding to CSV import...
[2025-12-16 19:39:14] [INFO] [THOTH_IMPORT] [import_to_db.sh] Applying schema fixes before import
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh] Schema fixes applied successfully
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh] Found 4 officer CSV files to process
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh]   - 2509-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh]   - 2510-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh]   - 2511-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh]   - 2512-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh] Importing /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2509-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using service=copwatchdog configuration
[2025-12-16 19:39:15] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using helper script to import /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2509-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Starting CSV import script
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Extracted version_tag: 2509 from 2509-copwatchdog.csv
[2025-12-16 19:39:15] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Target CSV file: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2509-copwatchdog.csv
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Current working directory: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/BRAIN
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Full path to CSV: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2509-copwatchdog.csv
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File exists and is readable
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File contents preview:
[2025-12-16 19:39:15] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Loading /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2509-copwatchdog.csv into cwd_raw.officers_raw
[2025-12-16 19:39:15] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Detected 37 columns in CSV header
[2025-12-16 19:39:15] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Using 37-column format (legacy, no Officer Image or Profile URL)
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Executing SQL import, capturing stderr
[2025-12-16 19:39:15] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Connection parameters: PGHOST=localhost, PGPORT=5433, PGUSER=copwatchdog, PGDATABASE=copwatchdog
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_OUTPUT temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.3C4H4Ncw
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_STDERR temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.dmNLnUL1
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stdout: BEGIN
CREATE TABLE
COPY 15
[2025-12-16 19:39:16] [ERROR] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stderr: ERROR:  column "Officer Image" does not exist
LINE 30:   CASE WHEN 'false' = 'true' THEN nullif(trim("Officer Image...
                                                       ^
HINT:  Perhaps you meant to reference the column "officers_raw.officer_image".
[2025-12-16 19:39:16] [ERROR] [DB_IMPORT] [import_into_cwd_raw.sh] SQL import failed with exit code 3
[2025-12-16 19:39:16] [ERROR] [THOTH_IMPORT] [import_to_db.sh] Import FAILED for /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2509-copwatchdog.csv
ERROR:  duplicate key value violates unique constraint "data_sources_table_version_unique"
DETAIL:  Key (table_name, version_tag)=(cwd_raw.officers_raw, 2509) already exists.
[2025-12-16 19:39:16] [INFO] [THOTH_IMPORT] [import_to_db.sh] Importing /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2510-copwatchdog.csv
[2025-12-16 19:39:16] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using service=copwatchdog configuration
[2025-12-16 19:39:16] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using helper script to import /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2510-copwatchdog.csv
[2025-12-16 19:39:16] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Starting CSV import script
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Extracted version_tag: 2510 from 2510-copwatchdog.csv
[2025-12-16 19:39:16] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Target CSV file: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2510-copwatchdog.csv
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Current working directory: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/BRAIN
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Full path to CSV: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2510-copwatchdog.csv
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File exists and is readable
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File contents preview:
[2025-12-16 19:39:16] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Loading /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2510-copwatchdog.csv into cwd_raw.officers_raw
[2025-12-16 19:39:16] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Detected 37 columns in CSV header
[2025-12-16 19:39:16] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Using 37-column format (legacy, no Officer Image or Profile URL)
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Executing SQL import, capturing stderr
[2025-12-16 19:39:16] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Connection parameters: PGHOST=localhost, PGPORT=5433, PGUSER=copwatchdog, PGDATABASE=copwatchdog
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_OUTPUT temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.RzvW4VzV
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_STDERR temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.S7E4j5Ig
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stdout: BEGIN
CREATE TABLE
COPY 28
[2025-12-16 19:39:17] [ERROR] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stderr: ERROR:  column "Officer Image" does not exist
LINE 30:   CASE WHEN 'false' = 'true' THEN nullif(trim("Officer Image...
                                                       ^
HINT:  Perhaps you meant to reference the column "officers_raw.officer_image".
[2025-12-16 19:39:17] [ERROR] [DB_IMPORT] [import_into_cwd_raw.sh] SQL import failed with exit code 3
[2025-12-16 19:39:17] [ERROR] [THOTH_IMPORT] [import_to_db.sh] Import FAILED for /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2510-copwatchdog.csv
ERROR:  duplicate key value violates unique constraint "data_sources_table_version_unique"
DETAIL:  Key (table_name, version_tag)=(cwd_raw.officers_raw, 2510) already exists.
[2025-12-16 19:39:17] [INFO] [THOTH_IMPORT] [import_to_db.sh] Importing /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2511-copwatchdog.csv
[2025-12-16 19:39:17] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using service=copwatchdog configuration
[2025-12-16 19:39:17] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using helper script to import /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2511-copwatchdog.csv
[2025-12-16 19:39:17] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Starting CSV import script
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Extracted version_tag: 2511 from 2511-copwatchdog.csv
[2025-12-16 19:39:17] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Target CSV file: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2511-copwatchdog.csv
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Current working directory: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/BRAIN
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Full path to CSV: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2511-copwatchdog.csv
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File exists and is readable
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File contents preview:
[2025-12-16 19:39:17] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Loading /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2511-copwatchdog.csv into cwd_raw.officers_raw
[2025-12-16 19:39:17] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Detected 37 columns in CSV header
[2025-12-16 19:39:17] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Using 37-column format (legacy, no Officer Image or Profile URL)
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Executing SQL import, capturing stderr
[2025-12-16 19:39:17] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Connection parameters: PGHOST=localhost, PGPORT=5433, PGUSER=copwatchdog, PGDATABASE=copwatchdog
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_OUTPUT temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.pw7e1j4L
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_STDERR temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.1VeazAqS
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stdout: BEGIN
CREATE TABLE
COPY 19
[2025-12-16 19:39:18] [ERROR] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stderr: ERROR:  column "Officer Image" does not exist
LINE 30:   CASE WHEN 'false' = 'true' THEN nullif(trim("Officer Image...
                                                       ^
HINT:  Perhaps you meant to reference the column "officers_raw.officer_image".
[2025-12-16 19:39:18] [ERROR] [DB_IMPORT] [import_into_cwd_raw.sh] SQL import failed with exit code 3
[2025-12-16 19:39:18] [ERROR] [THOTH_IMPORT] [import_to_db.sh] Import FAILED for /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2511-copwatchdog.csv
ERROR:  duplicate key value violates unique constraint "data_sources_table_version_unique"
DETAIL:  Key (table_name, version_tag)=(cwd_raw.officers_raw, 2511) already exists.
[2025-12-16 19:39:18] [INFO] [THOTH_IMPORT] [import_to_db.sh] Importing /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2512-copwatchdog.csv
[2025-12-16 19:39:18] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using service=copwatchdog configuration
[2025-12-16 19:39:18] [INFO] [THOTH_IMPORT] [import_to_db.sh] Using helper script to import /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2512-copwatchdog.csv
[2025-12-16 19:39:18] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Starting CSV import script
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Extracted version_tag: 2512 from 2512-copwatchdog.csv
[2025-12-16 19:39:18] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Target CSV file: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2512-copwatchdog.csv
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Current working directory: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/BRAIN
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Full path to CSV: /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2512-copwatchdog.csv
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File exists and is readable
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] File contents preview:
[2025-12-16 19:39:18] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Loading /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2512-copwatchdog.csv into cwd_raw.officers_raw
[2025-12-16 19:39:18] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Detected 39 columns in CSV header
[2025-12-16 19:39:18] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Using 39-column format (includes Officer Image, Profile URL)
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Executing SQL import, capturing stderr
[2025-12-16 19:39:18] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] Connection parameters: PGHOST=localhost, PGPORT=5433, PGUSER=copwatchdog, PGDATABASE=copwatchdog
[2025-12-16 19:39:19] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_OUTPUT temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.Cq8Eem7u
[2025-12-16 19:39:19] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL_STDERR temp file: /var/folders/rp/qy300jzx1qs91kh1rzlthhf40000gn/T/tmp.AADd14Uk
[2025-12-16 19:39:19] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stdout: BEGIN
CREATE TABLE
COPY 20
INSERT 0 20
COMMIT
[2025-12-16 19:39:19] [DEBUG] [DB_IMPORT] [import_into_cwd_raw.sh] SQL stderr was empty
[2025-12-16 19:39:19] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] CSV import completed successfully
[2025-12-16 19:39:19] [INFO] [DB_IMPORT] [import_into_cwd_raw.sh] Import complete. Recent rows:
[2025-12-16 19:39:19] [INFO] [THOTH_IMPORT] [import_to_db.sh] Import succeeded for /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/2512-copwatchdog.csv
[2025-12-16 19:39:19] [DEBUG] [THOTH_IMPORT] [import_to_db.sh] Recording import metadata: version_tag=2512, schema_version=1.0
ERROR:  column "officers_raw.race" must appear in the GROUP BY clause or be used in an aggregate function
LINE 22:         CASE WHEN race IS NULL THEN 'race' END AS field,
                           ^
[2025-12-16 19:39:19] [INFO] [THOTH_IMPORT] [import_to_db.sh] Metadata logged to data_sources for 2512-copwatchdog.csv
[2025-12-16 19:39:19] [INFO] [THOTH_IMPORT] [import_to_db.sh] Import run complete: processed=1 failed=3
[2025-12-16 19:39:19] [WARNING] [THOTH_IMPORT] [import_to_db.sh] Import completed with failures: 3 out of 4 CSVs failed to import
[2025-12-16 19:39:19] [WARNING] [THOTH_IMPORT] [import_to_db.sh] Check ERROR_LOG for details on failed imports
[2025-12-16 19:39:19] [INFO] [THOTH_IMPORT] [import_to_db.sh] Continuing to articles import despite CSV failures...
[2025-12-16 19:39:19] [INFO] [THOTH_IMPORT] [import_to_db.sh] 1 CSVs imported successfully into cwd_raw.officers_raw
[2025-12-16 19:39:19] [INFO] [ARTICLES_IMPORT] [import_to_db.sh] Importing articles from /Users/vicstizzi/ART/YUMYODA/TECH/COPWATCHDOG/THOTH/NYC/CSV/articles.csv
[2025-12-16 19:39:20] [INFO] [ARTICLES_IMPORT] [import_to_db.sh] Articles import succeeded: CREATE TABLE
COPY 13
INSERT 0 13
 imported 
----------
       13
(1 row)
[2025-12-16 19:39:20] [ERROR] [THOTH_IMPORT] [import_to_db.sh] Database import process completed with errors: 3 officer CSV(s) failed
[2025-12-16 19:39:20] [ERROR] [THOTH] [run_copwatchdog.sh] Database import process failed
